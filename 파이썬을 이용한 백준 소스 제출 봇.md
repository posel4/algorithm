# Pythonì„ ì´ìš©í•œ ë°±ì¤€ ì†ŒìŠ¤ ì œì¶œ ë´‡ ì œì‘ ë°©ë²•

## Requirements

ì œì‘ ì–¸ì–´ëŠ” Python 3ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•©ë‹ˆë‹¤.  

Pythonì„ ì´ìš©í•´ ì›¹ì— ë¡œê·¸ì¸ì´ë‚˜ ì†ŒìŠ¤ë¥¼ ì œì¶œí•˜ê¸° ìœ„í•´ì„œ requests íŒ¨í‚¤ì§€ê°€, í˜ì´ì§€ ë‚´ìš©ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì½ê¸° ìœ„í•œ BeautifulSoup4 íŒ¨í‚¤ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.   
í•´ë‹¹ íŒ¨í‚¤ì§€ê°€ ì—†ë‹¤ë©´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒì„ ì…ë ¥í•˜ì—¬ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

```bash
pip install requests
pip install bs4
```

## Login

ë°±ì¤€ì˜ ë¡œê·¸ì¸ì€ ê°€ì¥ ê¸°ë³¸ì ì¸ í˜•íƒœì…ë‹ˆë‹¤.  
Fiddlerë¥¼ ë„ìš°ê³  ë°±ì¤€ ë¡œê·¸ì¸ì„ í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

<img width="932" alt="image" src="https://user-images.githubusercontent.com/106955460/177008957-6b255bee-9e04-4fb4-8545-f8369f48e116.png">

login_user_idì— ì•„ì´ë””ë¥¼, login_passwordì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  https://acmicpc.net/signinìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.  

ì´ ê³¼ì •ì„ Pythonìœ¼ë¡œ ì‘ì„±í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  

```python
import requests

LOGIN_INFO = {"login_user_id":"(ì•„ì´ë””)", "login_password":"(ë¹„ë°€ë²ˆí˜¸)"}
boj_url = "https://www.acmicpc.net/"

with requests.Session() as sess:
    sess.post(boj_url+'signin',data=LOGIN_INFO)
```
requests ì„¸ì…˜ì„ í•˜ë‚˜ ë§Œë“¤ì–´ë†“ê³  ë¡œê·¸ì¸í•  ë•Œ ì •ë³´ë¥¼ ë³´ë‚´ëŠ” ì£¼ì†Œì— ë¡œê·¸ì¸ ì •ë³´ë¥¼ ë³´ë‚´ë©´ ë©ë‹ˆë‹¤.  

## ë¡œê·¸ì¸ í™•ì¸í•˜ê¸°(optional)

ë¡œê·¸ì¸ì´ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ê¸° ì „ê³¼ í›„ì— ìƒê¸°ëŠ” ì°¨ì´ë¥¼ ê²€ì‚¬í•´ì•¼ê² ì£ ?  
ë°±ì¤€ì˜ ê²½ìš° ì¿ í‚¤ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ê¸°ë¡ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì‚¬ì´íŠ¸ì—ì„œ ì§ì ‘ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.  

<img width="930" alt="image" src="https://user-images.githubusercontent.com/106955460/177008995-f21c94c3-cbac-4c08-9a4c-e470e402be80.png">

ê°œë°œìë„êµ¬ë¡œ í™•ì¸í•´ë³´ë‹ˆ aíƒœê·¸ì˜ username classì— ì•„ì´ë””ê°€ ì…ë ¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.  
ì´ê±¸ í™œìš©í•´ë´…ì‹œë‹¤. í¬ë¡¬ ì½˜ì†”ì—ì„œ í•´ë‹¹ ê°ì²´ ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ë©´ ë¡œê·¸ì¸í•œ í›„ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.  

```html
> var d = $('a.username')[0]
undefined
> d
<a href="/user/uncertainty" class="username">{ë°±ì¤€ì•„ì´ë””}</a>
```

ë¡œê·¸ì¸í•˜ê¸° ì „ìœ¼ë¡œ ëŒì•„ê°€ì„œ í™•ì¸í•˜ë©´ Noneìœ¼ë¡œ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— usernameì€ ì¢‹ì€ ë¡œê·¸ì¸ ì‹ë³„ìê°€ ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤!  
a.usernameì„ Pythonìœ¼ë¡œ ì½ì–´ì„œ Noneì¸ì§€ ì•„ë‹Œì§€ë§Œ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤.  

```html
> d
undefined
```

<br>

ë°±ì¤€ ë©”ì¸ì£¼ì†Œì¸ acmicpc.netì„ ì½ì€ í›„ BeautifulSoupì˜ html íŒŒì„œë¡œ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

```python
import requests
from bs4 import BeautifulSoup as bs

LOGIN_INFO = {"login_user_id":"(ì•„ì´ë””)", "login_password":"(ë¹„ë°€ë²ˆí˜¸)"}
boj_url = "https://www.acmicpc.net/"

with requests.Session() as sess:
    sess.post(boj_url+'signin',data=LOGIN_INFO)
    soup = bs(sess.get(boj_url).text, 'html.parser')
    if soup.find('a', {'class': 'username'}) is None:
        print("Invalid login info")
        exit(1)
```

## ì†ŒìŠ¤ ì œì¶œ

### í…ŒìŠ¤íŠ¸ ì†ŒìŠ¤ ì¤€ë¹„í•˜ê¸°

1001ë²ˆ C++ (C) ì†ŒìŠ¤

```cpp
#include <stdio.h>

int main(){
  int a,b;
  scanf("%d %d",&a,&b);
  printf("%d",a-b);
}
```

ë¨¼ì € ìë™ìœ¼ë¡œ ì œì¶œí•  ì†ŒìŠ¤ë¥¼ ì¤€ë¹„í•´ë†“ì•„ì•¼ í•©ë‹ˆë‹¤.  
í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ 1001ë²ˆ ì†ŒìŠ¤ë¥¼ Python ì†ŒìŠ¤ì™€ ê°™ì€ ê²½ë¡œì— ì €ì¥í•´ë‘¡ë‹ˆë‹¤.  

```bash
BOJ_bot
â””â”€1001.cpp
â””â”€main.py
```

ê·¸ë¦¬ê³  Python main.pyì—ì„œ ë¬¸ì œ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ì†ŒìŠ¤ë„ ë¯¸ë¦¬ ì½ì–´ë†“ëŠ” ì½”ë“œë¥¼ ë¡œê·¸ì¸ ì „ì— ë„£ì–´ë†“ìŠµë‹ˆë‹¤.

```python
import requests
from bs4 import BeautifulSoup as bs

LOGIN_INFO = {"login_user_id":"(ì•„ì´ë””)", "login_password":"(ë¹„ë°€ë²ˆí˜¸)"}
boj_url = "https://www.acmicpc.net/"

problem_id = 1001
language = "C++14"
with open("1001.cpp", 'r') as f:
    code = f.read()

with requests.Session() as sess:
    sess.post(boj_url+'signin',data=LOGIN_INFO)
    soup = bs(sess.get(boj_url).text, 'html.parser')
    if soup.find('a', {'class': 'username'}) is None:
        print("Invalid login info")
        exit(1)
```

### í…ŒìŠ¤íŠ¸ ì†ŒìŠ¤ ì œì¶œí•´ë³´ê¸°

ì†ŒìŠ¤ë¥¼ ì œì¶œí•  ë•Œ íŒ¨í‚·ì„ í™•ì¸í•´ë³¼ê¹Œìš”?  

<img width="922" alt="image" src="https://user-images.githubusercontent.com/106955460/177009264-9d24f7fd-eeba-4917-b552-402a4c590141.png">

<img width="931" alt="image" src="https://user-images.githubusercontent.com/106955460/177009277-bddc912f-59d7-41b8-a627-5f67bbf38edf.png">

ëˆˆì— ë„ëŠ” ê²ƒì€  
`problem_id`ëŠ” ë¬¸ì œë²ˆí˜¸,  
`language`ëŠ” ì œê°€ ì„ íƒí•œ ì–¸ì–´ì¸ C++14ì— í•´ë‹¹í•˜ëŠ” ë²ˆí˜¸,    
`code_open`ì€ ì½”ë“œ ê³µê°œì—¬ë¶€(ì €ëŠ” ê³µê°œê°€ ê¸°ë³¸ ì„¤ì •ì…ë‹ˆë‹¤),  
`source`ëŠ” ì†ŒìŠ¤ ì „ë¬¸ì¸ê±´ ì•Œê² ëŠ”ë°,  
`csrf_key`ëŠ” ë˜ ë­ëŒ.. ë³´ì•ˆ í† í°ê°™ì€ë°..  

:link: https://stackoverflow.com/questions/5207160/what-is-a-csrf-token-what-is-its-importance-and-how-does-it-work  

ì—¬ê¸° ì¢‹ì€ ì„¤ëª…ì´ ìˆëŠ” ê²ƒ ê°™ì•„ì„œ ëŒ€ì²´í•©ë‹ˆë‹¤. ì†ŒìŠ¤ ì œì¶œì˜ ë¶€ì •ì‚¬ìš© ë°©ì§€ë¡œ ë³´ì…ë‹ˆë‹¤.    
ê·¸ëŸ¬ë‹ˆê¹Œ ì´ ê¸€ì˜ ë§í¬ ì¤‘ í•˜ë‚˜ì— ë°±ì¤€ì— í‹€ë¦° ì†ŒìŠ¤ë¥¼ ì œì¶œí•˜ëŠ” ê²ƒì„ ì‹¬ì–´ë†“ìœ¼ë©´ ì—¬ëŸ¬ë¶„ì˜ ë°±ì¤€ ì •ë‹µë¥ ì„ ë–¨êµ¬ëŠ” íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(!!).  
ê·¸ëŸ° ê²ƒì„ ë§‰ì•„ì£¼ëŠ” ê²ë‹ˆë‹¤.  

<img width="933" alt="image" src="https://user-images.githubusercontent.com/106955460/177009365-64d640f9-b2b6-41a1-b4e9-39cbb1202c44.png">

`csrf_key`ëŠ” ì œì¶œ ì‚¬ì´íŠ¸ì˜ htmlì„ í™•ì¸í•´ë³´ë‹ˆê¹Œ hiddenìœ¼ë¡œ ê°ì¶°ì ¸ìˆë˜ ê²ƒì´ ëª¨ìŠµì„ ë“œëŸ¬ë‚´ì¤ë‹ˆë‹¤.  
ì´ê±¸ ë°›ì•„ì„œ ì“°ë©´ ë˜ê² êµ°ìš”! input íƒœê·¸ ì•ˆì—ì„œ nameìœ¼ë¡œ ì°¾ì•„ì£¼ë©´ ë©ë‹ˆë‹¤.  

```python
  try:
		key = soup.find('input', {'name': 'csrf_key'})['value']
	except TypeError:
		print("Wrong problem number")
		exit(1)
```

`language`ì˜ ë²ˆí˜¸ë„ ì–¸ì–´ ì„ íƒì°½ì„ htmlë¡œ ì½ì–´ë³´ë©´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

```html
<select id="language" name="language" data-placeholder="ì–¸ì–´ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”." class="language-select col-md-2 chosen-select" data-no_results_text="ì—†ëŠ” ì–¸ì–´ ì…ë‹ˆë‹¤." style="display: none;">
	<option value="88" data-mime="text/x-c++src">C++14</option>
	<option value="3" data-mime="text/x-java">Java</option>
	<option value="28" data-mime="text/x-python" selected="">Python 3</option>
	<option value="75" data-mime="text/x-csrc">C11</option>
	<option value="73" data-mime="text/x-python">PyPy3</option>
	<option value="0" data-mime="text/x-csrc">C</option>
	<option value="1" data-mime="text/x-c++src">C++</option>
	<option value="49" data-mime="text/x-c++src">C++11</option>
	<option value="84" data-mime="text/x-c++src">C++17</option>
	<option value="91" data-mime="text/x-java">Java (OpenJDK)</option>
	<option value="93" data-mime="text/x-java">Java 11</option>
	<option value="6" data-mime="text/x-python">Python 2</option>
	<option value="32" data-mime="text/x-python">PyPy2</option>
	<option value="68" data-mime="text/x-ruby">Ruby 2.5</option>
	<option value="69" data-mime="text/x-kotlin">Kotlin (JVM)</option>
	<option value="92" data-mime="text/x-kotlin">Kotlin (Native)</option>
	<option value="74" data-mime="text/x-swift">Swift</option>
	<option value="58" data-mime="text/plain">Text</option>
	<option value="62" data-mime="text/x-csharp">C# 6.0</option>
	<option value="17" data-mime="text/javascript">node.js</option>
	<option value="12" data-mime="text/x-go">Go</option>
	<option value="29" data-mime="text/x-d">D</option>
	<option value="37" data-mime="text/x-fsharp">F#</option>
	<option value="7" data-mime="text/x-php">PHP</option>
	<option value="44" data-mime="text/plain">Rust</option>
	<option value="2" data-mime="text/x-pascal">Pascal</option>
	<option value="16" data-mime="text/x-lua">Lua</option>
	<option value="8" data-mime="text/x-perl">Perl</option>
	<option value="72" data-mime="text/x-rsrc">R</option>
	<option value="10" data-mime="text/x-objectivec">Objective-C</option>
	<option value="64" data-mime="text/x-objectivec">Objective-C++</option>
	<option value="59" data-mime="text/x-csrc">C (Clang)</option>
	<option value="60" data-mime="text/x-c++src">C++ (Clang)</option>
	<option value="66" data-mime="text/x-c++src">C++11 (Clang)</option>
	<option value="67" data-mime="text/x-c++src">C++14 (Clang)</option>
	<option value="77" data-mime="text/x-csrc">C11 (Clang)</option>
	<option value="85" data-mime="text/x-c++src">C++17 (Clang)</option>
	<option value="79" data-mime="text/plain">Golfscript</option>
	<option value="27" data-mime="text/plain">Assembly (32bit)</option>
	<option value="87" data-mime="text/plain">Assembly (64bit)</option>
	<option value="63" data-mime="text/x-vb">VB.NET 4.0</option>
	<option value="5" data-mime="text/x-sh">Bash</option>
	<option value="13" data-mime="text/x-fortran">Fortran</option>
	<option value="14" data-mime="text/x-scheme">Scheme</option>
	<option value="19" data-mime="text/plain">Ada</option>
	<option value="21" data-mime="text/plain">awk</option>
	<option value="22" data-mime="text/x-ocaml">OCaml</option>
	<option value="23" data-mime="text/x-brainfuck">Brainfuck</option>
	<option value="24" data-mime="text/plain">Whitespace</option>
	<option value="26" data-mime="text/x-tcl">Tcl</option>
	<option value="34" data-mime="text/javascript">Rhino</option>
	<option value="35" data-mime="text/x-cobol">Cobol</option>
	<option value="41" data-mime="text/x-c++src">Pike</option>
	<option value="43" data-mime="text/plain">sed</option>
	<option value="46" data-mime="text/plain">Boo</option>
	<option value="47" data-mime="text/plain">Intercal</option>
	<option value="48" data-mime="text/plain">bc</option>
	<option value="53" data-mime="text/plain">Nemerle</option>
	<option value="54" data-mime="text/plain">Cobra</option>
	<option value="70" data-mime="text/plain">Algol 68</option>
	<option value="71" data-mime="text/plain">Befunge</option>
	<option value="81" data-mime="text/x-haxe">Haxe</option>
	<option value="82" data-mime="text/plain">LOLCODE</option>
	<option value="83" data-mime="text/plain">ì•„í¬</option>
</select>
```

ì—¬ê¸°ì„œ í•„ìš”í•œ ê²ƒìœ¼ë¡œ dictionaryë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ë©´ ë˜ê² ìŠµë‹ˆë‹¤.  
C++14ì™€ Python 3ë§Œ ë§Œë“¤ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤.  

```python
LANG = {"C++14":88, "Python 3":28}
```

ì§€ê¸ˆê¹Œì§€ ëª¨ì€ ì œì¶œ ì •ë³´ë“¤ì„ dictionaryë¡œ ëª¨ì•„ì„œ ì œì¶œí•˜ë©´ ë©ë‹ˆë‹¤.  
code_openì˜ onlyacceptedëŠ” â€˜ë§ì•˜ì„ ë•Œë§Œ ê³µê°œâ€™ ì˜µì…˜ì…ë‹ˆë‹¤.  
ìœ„ íŒ¨í‚·ì—ì„œ ì½ì€ ì£¼ì†Œ í˜•íƒœê°€ /submit/1001 ì´ì—ˆì£ ? ê·¸ ì£¼ì†Œ ê·¸ëŒ€ë¡œ ì„¸ì…˜ì˜ postì— ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.  

```python
if language not in LANG:
        print("Invalid language")
        exit(1)

    data = {
        'problem_id': problem_id,
        'source': code,
        'language': LANG[language],
        'code_open': 'onlyaccepted',
        'csrf_key': key
    }

    sess.post(boj_url + '/submit/' + str(problem_id), data=data)
```

ì§€ê¸ˆê¹Œì§€ ì‘ì„±í•œ Python ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  

```python
import requests
from bs4 import BeautifulSoup as bs

LOGIN_INFO = {"login_user_id":"(ì•„ì´ë””)", "login_password":"(ë¹„ë°€ë²ˆí˜¸)"}
boj_url = "https://www.acmicpc.net/"
LANG = {"C++14":88, "Python 3":28}

problem_id = 1001
language = "C++14"
with open("1001.cpp", 'r') as f:
    code = f.read()

with requests.Session() as sess:
    sess.post(boj_url+'signin',data=LOGIN_INFO)

    soup = bs(sess.get(boj_url).text, 'html.parser')
    if soup.find('a', {'class': 'username'}) is None:
        print("invalid login info")
        exit(1)

    soup = bs(sess.get(boj_url + 'submit/' + str(problem_id)).text, 'html.parser')

    try:
        key = soup.find('input', {'name': 'csrf_key'})['value']
    except TypeError:
        print("Wrong problem number")
        exit(1)

    if language not in LANG:
        print("Invalid language")
        exit(1)

    data = {
        'problem_id': problem_id,
        'source': code,
        'language': LANG[language],
        'code_open': 'onlyaccepted',
        'csrf_key': key
    }

    sess.post(boj_url + '/submit/' + str(problem_id), data=data)
```

## ê²°ê³¼ í™•ì¸

ì´ì œ ë§‰ë°”ì§€ì…ë‹ˆë‹¤. ì œì¶œí•  ì¼ë„ ì—†ì–´ì„œ ì‰¬ìš´ ê²ƒë§Œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.  
ì–´ë–»ê²Œ â€˜ì±„ì ì´ ì¢…ë£Œë˜ì—ˆë‹¤â€™ëŠ” ê²ƒì„ í™•ì¸í•  ê²ƒì¸ì§€ë¥¼ ìƒê°í•´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.  
ê´€ì°°ì´ í•„ìš”í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.  

ë¨¼ì € ì œì¶œí•˜ê³  ì±„ì ì„ ê¸°ë‹¤ë¦´ ë•Œë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.  

<img width="742" alt="image" src="https://user-images.githubusercontent.com/106955460/177009480-49c0b076-2b25-486e-90ff-13fd630f4978.png">

â€˜ê¸°ë‹¤ë¦¬ëŠ” ì¤‘â€™ì´ë¼ëŠ” ìƒíƒœ ë©”ì‹œì§€ì˜ htmlì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  

```html
<span class="result-text">
    <span class="result-wait">ê¸°ë‹¤ë¦¬ëŠ” ì¤‘</span>
</span>
```

ì±„ì  ì¤‘ì¼ ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  

```html
<span class="result-text">
    <span class="result-judging">ì±„ì  ì¤‘ (6%, 11ì´ˆ)</span>
</span>
```

ì±„ì ì´ ì™„ë£Œë˜ì—ˆì„ ë•ŒëŠ” ì–´ë–¨ê¹Œìš”?  

```html
<span class="result-text">
    <span class="result-ac">ë§ì•˜ìŠµë‹ˆë‹¤!!</span>
</span>
```

classì˜ ì´ë¦„ì´ ë°”ë€Œë©´ì„œ ì±„ì  ê²°ê³¼ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤.  
ì¦‰, â€œresult-acâ€ê°€ Noneì´ë©´ ì•„ì§ ì±„ì ì´ ì¤‘ì´ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.  
ì´ë¥¼ ì´ìš©í•´ ì±„ì ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ë¥¼ ì´ìš©í•´ whileë¬¸ì„ íƒˆì¶œí•´ì£¼ë©´ ë˜ê² ìŠµë‹ˆë‹¤.  
ì½˜ì†”ì— í•œ ì¤„ë¡œ ì¶œë ¥í•˜ê¸° ìœ„í•´ \rì„ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.   

```python
    while True:
        url = boj_url + '/status?from_mine=1&problem_id=' + str(problem_id) + '&user_id' + LOGIN_INFO["login_user_id"]
        soup = bs(sess.get(url).text, 'html.parser')
        status = soup.find('span', {'class': 'result-text'}).find('span').string.strip()
        result = soup.find('span', {'class': 'result-ac'})
        if result is not None:
            break
        print('\r                      ',end='')
        print('\r%s' % status, end='')
    
    print()
```

## ë§ˆë¬´ë¦¬

```python
import requests
from bs4 import BeautifulSoup as bs

LOGIN_INFO = {"login_user_id":"(ì•„ì´ë””)", "login_password":"(ë¹„ë°€ë²ˆí˜¸)"}
boj_url = "https://www.acmicpc.net/"
LANG = {"C++14":88, "Python 3":28}

problem_id = 1001
language = "C++14"
with open("1001.cpp", 'r') as f:
    code = f.read()

with requests.Session() as sess:
    sess.post(boj_url+'signin',data=LOGIN_INFO)

    soup = bs(sess.get(boj_url).text, 'html.parser')
    if soup.find('a', {'class': 'username'}) is None:
        print("invalid login info")
        exit(1)

    soup = bs(sess.get(boj_url + 'submit/' + str(problem_id)).text, 'html.parser')

    try:
        key = soup.find('input', {'name': 'csrf_key'})['value']
    except TypeError:
        print("Wrong problem number")
        exit(1)

    if language not in LANG:
        print("Invalid language")
        exit(1)

    data = {
        'problem_id': problem_id,
        'source': code,
        'language': LANG[language],
        'code_open': 'onlyaccepted',
        'csrf_key': key
    }

    sess.post(boj_url + '/submit/' + str(problem_id), data=data)

    while True:
        url = boj_url + '/status?from_mine=1&problem_id=' + str(problem_id) + '&user_id' + LOGIN_INFO["login_user_id"]
        soup = bs(sess.get(url).text, 'html.parser')
        status = soup.find('span', {'class': 'result-text'}).find('span').string.strip()
        result = soup.find('span', {'class': 'result-ac'})
        print('\r                      ',end='')
        print('\r%s' % status, end='')
        if result is not None:
            break
    
    print()
```

ğŸ”— https://3-24.github.io/BOJ-submit-bot/
